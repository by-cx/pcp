{% extends "admin.html" %}
{% load i18n %}

{% block title %}
	Administrace > Uživatelé
{% endblock %}

{% block content %}
<script type="text/javascript">
	function remove(what) {
		$("#user_"+what).load("{% url users.views.rm 0 %}"+what)
	}
</script>
<div id="message-box"></div>
<div class="clear"></div>
<div class="content-box">
	<div class="content-box-header">
		<h3>Seznam uživatelů</h3>
		<div class="clear"></div>
	</div>
	<div class="content-box-content">
		<div class="tab-content default-tab" id="tab1">
			<table>
				<thead>
					<tr>
					   <th>Jméno uživatele</th>
					   <th>Informace</th>
					   <th>Domény</th>
					   <th>Web/app</th>
					   <th>E-maily</th>
					   <th>FTP účty</th>
					   <th>Pg/My</th>
					   <th>Home</th>
					   <th>Akce</th>
					</tr>
				</thead>
				{% if users %}
				<tbody>
					{% for user in users.object_list %}
					<tr>
						<td>{{ user }}</td>
						<td>
							{% if user.username in ssh_users %}Nainstalováno{% endif %}
							{% if user.parms.discount %} Sleva: {{ user.parms.discount }}%{% endif %}
						</td>
						<td>{{ user.parms.count_domains }}×</td>
						<td>{{ user.parms.count_sites }}×</td>
						<td>{{ user.parms.count_emails }}×</td>
						<td>{{ user.parms.count_ftps }}×</td>
						<td>{{ user.parms.count_pgs }}×/{{ user.parms.count_mys }}×</td>
						<td>{{ user.parms.home_size }}</td>
						<td id="user_{{ user.id }}">
							<a href="{% url users.views.switch_to_user user.id num_page %}">Přepnout</a>
							<a href="{% url users.views.install user.id %}" title="Upravit">Nainstalovat</a>
							<a href="{% url users.views.update user.id %}" title="Upravit"><img src="/m/images/icons/pencil.png" alt="Upravit" /></a>
							<a href="#" title="Smazat" onclick="if(confirm('Opravdu chcete smazat uživatele {{ user.id }}?')) remove('{{ user.id }}')"><img src="/m/images/icons/cross.png" alt="Smazat" /></a> 
						</td>
					</tr>
					{% endfor %}
				</tbody>
				<tfoot>
					<tr>
						<td colspan="9">
								<div class="pagination">
									{% if users.has_previous %}<a href="{% url users.views.show 1 %}" title="{% trans "První stránka" %}">&laquo; {% trans "První" %}</a>{% endif %}
									{% if users.has_previous %}<a href="{% url users.views.show users.previous_page_number %}" title="{% trans "Předchozí stránka" %}">&laquo; {% trans "Předchozí" %}</a>{% endif %}
				
									{% for p in paginator.page_range %}
										{% ifequal p num_page %}
											<a href="{% url users.views.show p %}" class="number current" title="{{ p }}">{{ p }}</a>
										{% else %}
											<a href="{% url users.views.show p %}" class="number" title="{{ p }}">{{ p }}</a>
										{% endifequal %}
									{% endfor %}
				
									{% if users.has_next %}<a href="{% url users.views.show users.next_page_number %}" title="{% trans "Další stránka" %}">{% trans "Další" %} &raquo;</a>{% endif %}
									{% if users.has_next %}<a href="{% url users.views.show paginator.num_pages %}" title="{% trans "Poslední stránka" %}">{% trans "Poslední" %} &raquo;</a>{% endif %}
								</div>
								<div class="clear"></div>
						</td>
					</tr>
				</tfoot>
				{% else %}
				<tbody>
				<tr>
					<td colspan="9">Žádný uživatel ještě nebyl přidán.</td>
				</tr>
				</tbody>
				{% endif%}
			</table>
		</div>
	</div>
</div>

{% endblock %}
