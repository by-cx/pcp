{% extends "admin.html" %}
{% load i18n %}

{% block title %}
	Administrace > Uživatelé
{% endblock %}

{% block jsblock %}
	{{ block.super }}
	function remove(what) {
		$("#user_"+what).load("{% url wsgiadmin.users.views.rm 0 %}"+what)
	}
{% endblock %}

{% block content %}
<div id="message-box"></div>
<div class="clear"></div>
<div class="content-box">
	<div class="content-box-header">
		<h3>Seznam uživatelů</h3>
		<div class="clear"></div>
	</div>
	<div class="content-box-content">
		<div class="tab-content default-tab" id="tab1">
			<table>
				<thead>
					<tr>
					   <th>Jméno uživatele</th>
					   <th>Informace</th>
					   <th>Domény</th>
					   <th>Web/app</th>
					   <th>E-maily</th>
					   <th>FTP účty</th>
					   <th>Pg/My</th>
					   <th>Home</th>
					   <th>Akce</th>
					</tr>
				</thead>
				{% if users %}
				<tbody>
					{% for user in users.object_list %}
					<tr>
						<td>{{ user }}</td>
						<td>
							{% if user.username in ssh_users %}Nainstalováno{% endif %}
							{% if user.parms.discount %} Sleva: {{ user.parms.discount }}%{% endif %}
						</td>
						<td>{{ user.parms.count_domains }}×</td>
						<td>{{ user.parms.count_sites }}×</td>
						<td>{{ user.parms.count_emails }}×</td>
						<td>{{ user.parms.count_ftps }}×</td>
						<td>{{ user.parms.count_pgs }}×/{{ user.parms.count_mys }}×</td>
						<td>{{ user.parms.home_size }}</td>
						<td id="user_{{ user.id }}">
							<a href="{% url wsgiadmin.users.views.switch_to_user user.id num_page %}">{% trans "Switch" %}</a>
							<a href="{% url wsgiadmin.users.views.install user.id %}" title="{% trans "Install" %}">{% trans "Install" %}</a>
							<a href="{% url wsgiadmin.users.views.update user.id %}" title="{% trans "Edit" %}"><img src="{{ STATIC_URL }}images/ico-editovat.png" alt="{% trans "Edit" %}" /></a>
							<a href="#" title="{% trans "Delete" %}" onclick="if(confirm('{% trans "Are you sure?" %}')) remove('{{ user.id }}')"><img src="{{ STATIC_URL }}images/ico-smazat.png" alt="{% trans "Delete" %}" /></a>
						</td>
					</tr>
					{% endfor %}
				</tbody>
				<tfoot>
					<tr>
						<td colspan="9">
								<div class="pagination">
									{% if users.has_previous %}<a href="{% url wsgiadmin.users.views.show 1 %}" title="{% trans "First page" %}">&laquo; {% trans "First" %}</a>{% endif %}
									{% if users.has_previous %}<a href="{% url wsgiadmin.users.views.show users.previous_page_number %}" title="{% trans "Previous page" %}">&laquo; {% trans "Previous" %}</a>{% endif %}
				
									{% for p in paginator.page_range %}
										{% if p == num_page %}
											<a href="{% url wsgiadmin.users.views.show p %}" class="number current" title="{{ p }}">{{ p }}</a>
										{% else %}
											<a href="{% url wsgiadmin.users.views.show p %}" class="number" title="{{ p }}">{{ p }}</a>
										{% endif %}
									{% endfor %}
				
									{% if users.has_next %}<a href="{% url wsgiadmin.users.views.show users.next_page_number %}" title="{% trans "Next page" %}">{% trans "Next" %} &raquo;</a>{% endif %}
									{% if users.has_next %}<a href="{% url wsgiadmin.users.views.show paginator.num_pages %}" title="{% trans "Last page" %}">{% trans "Last" %} &raquo;</a>{% endif %}
								</div>
								<div class="clear"></div>
						</td>
					</tr>
				</tfoot>
				{% else %}
				<tbody>
				<tr>
					<td colspan="9">Žádný uživatel ještě nebyl přidán.</td>
				</tr>
				</tbody>
				{% endif%}
			</table>
		</div>
	</div>
</div>

{% endblock %}
